---
title: javascript位运算
date: 2019-04-22 16:24
tags: [js]
categories: 前端开发
---

#### 按位与 (&)

知道 `&&` 运算符，两个为真才为真，`&` 类似，作用于二进制数，两个数为1时，返回1。

```javascript
// 例如： 1 & 3 = 1，过程如下：
//    0 0 1
//    0 1 1
//   ————————
//    0 0 1
```
判断奇数：
```javascript
if ((n % 2) === 1) // 是奇数
if (n & 1) // 是奇数
```

#### 按位或 (|)

`|` 和 `||` 类似，只要两个数中有一个数为1，结果就为1，其他则为0。

```javascript
// 例如： 1 | 3 = 3，过程如下：
//    0 0 1
//    0 1 1
//   ————————
//    0 1 1
```
向下取整：
```javascript
Math.floor(2.8) // 2
2.8 | 0 // 2
```
原理：其实浮点数是不支持位运算的，所以会先把1.1转成整数1再进行位运算，就好像是对浮点数向下求整。所以1|0的结果就是1。

#### 按位非 (~)
按位非就是求二进制的反码

```javascript
~1 //-2

// 00000000000000000000000000000001
// —————————————————————————————————
// 11111111111111111111111111111110
```
js中的数字默认是有符号的。有符号的32位二进制的最高位也就是第一位数字代表着正负，1代表负数，0代表整数。
负数的二进制转化为十进制：符号位不变，其他位取反加1。
```javascript
if (str.indexOf('a') >= 0) {//...}
if (~str.indexOf('a')) {//...}
```

#### 按位异或 (^)

按位异或是两个数中只有一个1时返回1，其他情况返回0。
```javascript
1 ^ 3 = 2
//   0 0 0 1
//   0 0 1 1
// ———————————
//   0 0 1 0
```
一个数异或自己 = 0，一个数异或 0 等于本身，https://leetcode-cn.com/problems/single-number/

#### 有符号左移 (<<)

有符号左移会将32位二进制数的所有位向左移动指定位数
A << B，表示把A转化为二进制后向左移动B位（在末尾添加B个0）
```javascript
2 << 5 = 64
//   10 后面加 5 个 0， 10 00000

// 2的4次方
console.log(1 << 4)
console.log(Math.pow(2, 4))
```

#### 有符号右移 (>>)
有符号右移会将32位二进制数的所有位向右移动指定位数。
A >> B，表示把A转化为二进制后向右移动B位（删除末尾的B位）。

```javascript
64 >> 5 = 2
// 64的二进制 1000000
// 去掉5个0： 10， 十进制为 2

// 求一个数的1/2 (偶数)
64 >> 1
```

#### 无符号右移 (>>>)
正数的无符号右移与有符号右移结果是一样的。负数的无符号右移会把符号位也一起移动，而且无符号右移会把负数的二进制码当成正数的二进制码

```javascript
64 >>> 5 = 2
-64 >>> 5 = 134217726
// -64表示为 -1000000
// 11111111111111111111111111000000
-1 >>> 0 = 4294967295
```